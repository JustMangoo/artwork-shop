import{z as y,H as q,I as B,o as a,g as p,b as s,r as _,i,e as b,a as n,w as t,d as V,k as K,J as N,c as f,u as $,j as C,f as j,m as M,t as P,h as d,s as m,p as E,q as H}from"./index.esm-BSd0a89p.js";/* empty css                                                                   */import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import O from"./CartSidebar-D12dIBYV.js";const Z={__name:"Dropdown",setup(e){const r=y(!1),u=y(null);function v(){r.value=!r.value}function c(){r.value=!1}function o(h){u.value&&!u.value.contains(h.target)&&c()}return q(()=>{window.addEventListener("click",o)}),B(()=>{window.removeEventListener("click",o)}),(h,l)=>(a(),p("div",{ref_key:"dropdownContainer",ref:u,class:"dropdown-container"},[s("button",{class:"label",onClick:b(v,["stop"])},[_(h.$slots,"dropdown-label",{},()=>[i("Dropdown")],!0)]),n(N,{name:"fade"},{default:t(()=>[V(s("div",{class:"dropdown-content",onClick:l[0]||(l[0]=b(()=>{},["stop"]))},[_(h.$slots,"link-container",{},()=>[i("Default")],!0)],512),[[K,r.value]])]),_:3})],512))}},R=k(Z,[["__scopeId","data-v-5aaba3ec"]]),z={__name:"DropdownLink",props:{href:{type:String,required:!0}},setup(e){return(r,u)=>(a(),f($(C),{href:e.href,class:"option"},{default:t(()=>[_(r.$slots,"default",{},void 0,!0)]),_:3},8,["href"]))}},F=k(z,[["__scopeId","data-v-5a1219b6"]]),Q={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(e){const r=e,u=j(()=>r.active?"activeLink":"inactiveLink");return(v,c)=>(a(),f($(C),{href:e.href,class:M(u.value)},{default:t(()=>[_(v.$slots,"default",{},void 0,!0)]),_:3},8,["href","class"]))}},U=k(Q,[["__scopeId","data-v-e87f61f7"]]),A={props:{message:String,type:{type:String,default:"message"},uniqueKey:{type:Number,required:!1,default:()=>Date.now()}},data(){return{visible:!1,slideIn:!1}},watch:{uniqueKey(e,r){e!==r&&this.show()}},methods:{show(){this.visible=!0,setTimeout(()=>{this.slideIn=!0},1),setTimeout(()=>{this.hide()},4e3)},hide(){this.slideIn=!1,setTimeout(()=>{this.visible=!1},300)}},mounted(){this.message!=""&&this.show()}};function J(e,r,u,v,c,o){return c.visible?(a(),p("div",{key:0,class:M(["message",u.type,{"slide-in":c.slideIn}]),onClick:r[0]||(r[0]=(...h)=>o.hide&&o.hide(...h))},P(u.message),3)):d("",!0)}const G=k(A,[["render",J],["__scopeId","data-v-7af88464"]]),I="/build/assets/logo-Dzfa9Ziu.svg",W={components:{CartSidebar:O,Dropdown:R,DropdownLink:F,NavLink:U,Link:C,SystemAlert:G},props:{canLogin:{type:Boolean,default:!0},canRegister:{type:Boolean,default:!1}},data(){return{isCartTrue:!1,isCartVisible:!1,cartItems:[],flashMessage:null,flashType:null}},mounted(){this.checkFlashMessages()},methods:{getMessageType(){return this.$page.props.flash.success?"success":this.$page.props.flash.error?"error":this.$page.props.flash.warning?"warning":"message"},getMessageText(){return this.$page.props.flash.success?this.$page.props.flash.success.message:this.$page.props.flash.error?this.$page.props.flash.error.message:this.$page.props.flash.warning?this.$page.props.flash.warning.message:this.$page.props.flash.message.message},getMessageKey(){return this.$page.props.flash.success?this.$page.props.flash.success.uniqueKey:this.$page.props.flash.error?this.$page.props.flash.error.uniqueKey:this.$page.props.flash.warning?this.$page.props.flash.warning.uniqueKey:this.$page.props.flash.message.uniqueKey},toggleCart(e){e&&e.stopPropagation(),this.clearFlashMessages,this.isCartTrue=!this.isCartTrue,this.isCartVisible=!this.isCartVisible,this.isCartTrue?(document.addEventListener("click",this.handleClickOutside,!0),this.fetchCartItems(),this.isCartVisible=!0):(this.isCartVisible=!1,document.removeEventListener("click",this.handleClickOutside,!0)),this.lockBodyScroll(this.isCartVisible)},checkFlashMessages(){const e=this.$page.props.flash;e.success?this.flashMessage=e.success.message:e.error?this.flashMessage=e.error.message:e.warning?this.flashMessage=e.warning.message:e.message&&(this.flashMessage=e.message.message)},clearFlashMessages(){this.flashMessage=null,this.flashType=null},showMessage(e,r){console.log(e,r)},handleClickOutside(e){this.$refs.cartSidebar&&!this.$refs.cartSidebar.$el.contains(e.target)&&this.toggleCart()},fetchCartItems(){axios.get("/cart").then(e=>{this.cartItems=e.data.cartItems}).catch(e=>{console.error("Error fetching cart items:",e)})},handleRemoveItem(e){this.$inertia.delete(`/cart/${e}`,{onSuccess:()=>{this.fetchCartItems()}})},handleClearCart(){this.$inertia.post("/cart/clear",{},{onSuccess:()=>{this.cartItems=[]}})},updateQuantity(e,r){this.$inertia.patch(`/cart/item/${e.id}`,{quantity:r},{onSuccess:()=>{this.fetchCartItems()}})},lockBodyScroll(e){document.body.style.overflow=e?"hidden":""}},watch:{isCartVisible(e){this.lockBodyScroll(e)}},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}},g=e=>(E("data-v-7d11bfdf"),e=e(),H(),e),X={class:"nav-container"},Y={class:"outer-container"},x={class:"inner-container"},ee={key:0,class:"wrapper--logo-links"},se={class:"logo-container"},te=g(()=>s("img",{src:I,alt:"website logo"},null,-1)),re=g(()=>s("div",{class:"line-seperator"},null,-1)),ae={class:"nav-link"},ie={key:1,class:"wrapper--logo-links"},oe={class:"logo-container"},ne=g(()=>s("img",{src:I,alt:"website logo"},null,-1)),le=g(()=>s("div",{class:"line-seperator"},null,-1)),ue={class:"nav-link"},he={key:2,class:"account-menu"},ce={class:"account-links"},de={class:"link-icon"},pe=g(()=>s("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",class:"icon",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z","stroke-width":"1.5","stroke-linecap":"sharp","stroke-linejoin":"sharp"}),s("path",{d:"M12 14C8.13401 14 5 17.134 5 21H19C19 17.134 15.866 14 12 14Z","stroke-width":"1.5","stroke-linecap":"sharp","stroke-linejoin":"sharp"})],-1)),fe=g(()=>s("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",class:"icon",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z","stroke-width":"1.5","stroke-linecap":"sharp","stroke-linejoin":"sharp"}),s("path",{d:"M12 14C8.13401 14 5 17.134 5 21H19C19 17.134 15.866 14 12 14Z","stroke-width":"1.5","stroke-linecap":"sharp","stroke-linejoin":"sharp"})],-1)),ge=g(()=>s("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"icon"},[s("path",{d:"M6.29977 5H21L19 12H7.37671M20 16H8L6 3H3M9 20C9 20.5523 8.55228 21 8 21C7.44772 21 7 20.5523 7 20C7 19.4477 7.44772 19 8 19C8.55228 19 9 19.4477 9 20ZM20 20C20 20.5523 19.5523 21 19 21C18.4477 21 18 20.5523 18 20C18 19.4477 18.4477 19 19 19C19.5523 19 20 19.4477 20 20Z","stroke-width":"1.5","stroke-linecap":"sharp","stroke-linejoin":"sharp"})],-1)),me=[ge],ve={key:0};function ke(e,r,u,v,c,o){const h=m("Link"),l=m("NavLink"),w=m("DropdownLink"),S=m("Dropdown"),L=m("SystemAlert"),D=m("CartSidebar");return a(),p("nav",X,[s("div",Y,[s("div",x,[e.$page.props.auth.user&&(e.$page.props.auth.user.role_id===2||e.$page.props.auth.user.role_id===3)?(a(),p("div",ee,[s("div",se,[n(h,{href:"/dashboard"},{default:t(()=>[te]),_:1})]),re,s("div",ae,[n(l,{href:e.route("dashboard"),active:e.route().current("dashboard")},{default:t(()=>[i(" Panelis ")]),_:1},8,["href","active"]),n(l,{href:e.route("products.index"),active:e.route().current("products.index")},{default:t(()=>[i(" Produkti ")]),_:1},8,["href","active"]),n(l,{href:e.route("orders.index"),active:e.route().current("orders.index")},{default:t(()=>[i(" Pasūtījumi ")]),_:1},8,["href","active"]),e.$page.props.auth.user.role_id===2?(a(),f(l,{key:0,href:e.route("users.index"),active:e.route().current("users.index")},{default:t(()=>[i(" Lietotāji ")]),_:1},8,["href","active"])):d("",!0)])])):(a(),p("div",ie,[s("div",oe,[n(h,{href:"/"},{default:t(()=>[ne]),_:1})]),le,s("div",ue,[n(l,{href:e.route("home"),active:e.route().current("home")},{default:t(()=>[i(" Sākums ")]),_:1},8,["href","active"]),n(l,{href:e.route("printed"),active:e.route().current("printed")},{default:t(()=>[i(" Printēts ")]),_:1},8,["href","active"]),n(l,{href:e.route("original"),active:e.route().current("original")},{default:t(()=>[i(" Oriģināls ")]),_:1},8,["href","active"]),n(l,{href:e.route("woodwork"),active:e.route().current("woodwork")},{default:t(()=>[i(" Kokdarbi ")]),_:1},8,["href","active"]),n(l,{href:e.route("products-customer"),active:e.route().current("products-customer")},{default:t(()=>[i(" Visi produkti ")]),_:1},8,["href","active"]),n(l,{href:e.route("about"),active:e.route().current("about")},{default:t(()=>[i(" Par Mani ")]),_:1},8,["href","active"])])])),u.canLogin?(a(),p("div",he,[s("div",ce,[s("div",de,[e.$page.props.auth.user?(a(),f(S,{key:0},{"dropdown-label":t(()=>[pe]),"link-container":t(()=>[e.route("profile.edit")?(a(),f(w,{key:0,href:e.route("profile.edit")},{default:t(()=>[i(" Profils ")]),_:1},8,["href"])):d("",!0),e.route("customer.orders")&&e.$page.props.auth.user.role_id===1?(a(),f(w,{key:1,href:e.route("customer.orders")},{default:t(()=>[i(" Pasūtījumi ")]),_:1},8,["href"])):d("",!0),n(w,{href:e.route("logout"),method:"post"},{default:t(()=>[i(" Iziet ")]),_:1},8,["href"])]),_:1})):(a(),f(h,{key:1,href:e.route("login"),class:"link"},{default:t(()=>[fe]),_:1},8,["href"]))]),!e.$page.props.auth.user||e.$page.props.auth.user.role_id===1?(a(),p("div",{key:0,class:"link-icon",onClick:r[0]||(r[0]=T=>o.toggleCart(T))},me)):d("",!0)])])):d("",!0)])]),e.$page.props.flash.success||e.$page.props.flash.error||e.$page.props.flash.warning||e.$page.props.flash.message?(a(),p("div",ve,[!c.flashMessage!==null?(a(),f(L,{key:0,message:o.getMessageText(),type:o.getMessageType(),uniqueKey:o.getMessageKey()},null,8,["message","type","uniqueKey"])):d("",!0)])):d("",!0),n(D,{ref:"cartSidebar","cart-items":c.cartItems,"is-visible":c.isCartTrue,onClose:o.toggleCart,onRemoveItem:o.handleRemoveItem,onClearCart:o.handleClearCart,onUpdateQuantity:o.updateQuantity},null,8,["cart-items","is-visible","onClose","onRemoveItem","onClearCart","onUpdateQuantity"])])}const be=k(W,[["render",ke],["__scopeId","data-v-7d11bfdf"]]);export{be as N};
